# Завдання 2. Рекурсія. Створення фрактала “дерево Піфагора” за допомогою рекурсії
# Необхідно написати програму на Python, яка використовує рекурсію для створення фрактала “дерево Піфагора”.
# Програма має візуалізувати фрактал “дерево Піфагора”, і користувач повинен мати можливість вказати рівень рекурсії.

import turtle


def draw_pythagoras_tree(t, branch_len, angle, level):
    """
    Рекурсивна функція для малювання дерева.
    t: об'єкт черепашки
    branch_len: довжина поточної гілки
    angle: кут повороту гілок
    level: глибина рекурсії (скільки разів розгалужуватися)
    """
    # Базовий випадок: якщо рівень 0, зупиняємось
    if level > 0:
        # 1. Малюємо основну гілку (стовбур)
        t.forward(branch_len)

        # 2. Зберігаємо позицію для правого розгалуження
        # Повертаємо праворуч і викликаємо функцію для нової гілки
        t.right(angle)
        draw_pythagoras_tree(t, branch_len * 0.75, angle, level - 1)

        # 3. Повертаємося ліворуч, щоб намалювати ліву гілку
        # (кут множимо на 2, бо ми вже повернуті праворуч)
        t.left(angle * 2)
        draw_pythagoras_tree(t, branch_len * 0.75, angle, level - 1)

        # 4. Повертаємо черепашку в початковий стан (кут і позиція)
        t.right(angle)
        t.backward(branch_len)


def main():
    # Налаштування екрана
    screen = turtle.Screen()
    screen.title("Фрактал: Дерево Піфагора")

    # Створення та налаштування "черепашки"
    t = turtle.Turtle()
    t.speed(0)  # Найшвидша анімація
    t.color("brown")
    t.left(90)  # Повертаємо вгору, щоб дерево росло знизу вгору
    t.penup()
    t.goto(0, -200)  # Опускаємо точку старту нижче
    t.pendown()

    # Запит рівня рекурсії у користувача
    try:
        level = int(
            input("Введіть рівень рекурсії (рекомендовано від 5 до 10): ")
        )  # Для того щоб фрактал був як на картинці рівень рекурсії
        # має бути 8
        # Виклик функції: довжина гілки 100, кут 45 градусів
        draw_pythagoras_tree(t, 100, 45, level)

        print("Готово!")
    except ValueError:
        print("Будь ласка, введіть ціле число.")

    # Залишити вікно відкритим після завершення
    screen.mainloop()


if __name__ == "__main__":
    main()
